<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Tragaperras Real</title>
<style>
body {
    background: black;
    color: lime;
    font-family: monospace;
    text-align: center;
}
button, input {
    font-size: 18px;
    padding: 8px;
    margin: 6px;
}
.reels {
    font-size: 60px;
    margin: 20px;
}
</style>
</head>
<body>

<h1>ğŸ° TRAGAPERRAS REAL ğŸ°</h1>

<p>Dinero: $<span id="money">100</span></p>
<p>Jackpot: $<span id="jackpot">500</span></p>
<p>Multiplicador: x<span id="mult">1</span></p>

<input type="number" id="bet" placeholder="CuÃ¡nto apostar" min="1">
<br>

<button onclick="spin()">ğŸ² TIRAR</button>
<button onclick="buyMult()">Comprar x2 Mult ($100)</button>
<button onclick="resetGame()">ğŸ”„ Reiniciar</button>

<div class="reels">
    <span id="r1">ğŸ’</span>
    <span id="r2">ğŸ’</span>
    <span id="r3">ğŸ’</span>
</div>

<p id="log">Esperando tu jugadaâ€¦</p>

<script>
let money = 100;
let mult = 1;
let jackpot = 500;

// SÃ­mbolos y probabilidades
const symbols = [
    {icon: "ğŸ’", value: 1, weight: 35},
    {icon: "ğŸ‹", value: 2, weight: 25},
    {icon: "ğŸ””", value: 5, weight: 20},
    {icon: "ğŸ’", value: 10, weight: 12},
    {icon: "â­", value: 20, weight: 6},
    {icon: "ğŸ’°", value: 0, weight: 2} // Jackpot
];

function weightedRandom() {
    let total = symbols.reduce((sum, s) => sum + s.weight, 0);
    let roll = Math.random() * total;
    for (let s of symbols) {
        if (roll < s.weight) return s;
        roll -= s.weight;
    }
}

function spin() {
    const betInput = document.getElementById("bet");
    const bet = Number(betInput.value);

    if (!betInput.value || bet <= 0) {
        log("âŒ TenÃ©s que escribir cuÃ¡nto apostar");
        return;
    }
    if (bet > money) {
        log("âŒ No tenÃ©s suficiente dinero");
        return;
    }

    // Aumenta jackpot con cada apuesta
    jackpot += 1;

    // Girar carretes
    const r1 = weightedRandom();
    const r2 = weightedRandom();
    const r3 = weightedRandom();

    document.getElementById("r1").innerText = r1.icon;
    document.getElementById("r2").innerText = r2.icon;
    document.getElementById("r3").innerText = r3.icon;

    let win = 0;

    // Jackpot
    if (r1.icon === "ğŸ’°" && r2.icon === "ğŸ’°" && r3.icon === "ğŸ’°") {
        win = jackpot;
        jackpot = 500; // se reinicia
        money += win;
        log("ğŸ‰ JACKPOT! Ganaste $" + win);
    }
    // 3 iguales
    else if (r1.icon === r2.icon && r2.icon === r3.icon) {
        win = bet * r1.value * mult;
        money += win;
        log("ğŸ’° 3 IGUALES! Ganaste $" + win);
    }
    // 2 iguales
    else if (r1.icon === r2.icon || r1.icon === r3.icon || r2.icon === r3.icon) {
        let symbol = (r1.icon === r2.icon) ? r1 : (r1.icon === r3.icon) ? r1 : r2;
        win = bet * symbol.value * 0.5 * mult;
        money += win;
        log("âœ¨ 2 IGUALES! Ganaste $" + win.toFixed(0));
    }
    else {
        money -= bet;
        log("âŒ Perdiste $" + bet);
    }

    updateUI();
}

function buyMult() {
    if (money < 100) {
        log("âŒ No tenÃ©s suficiente dinero");
        return;
    }
    money -= 100;
    mult *= 2;
    log("âœ–ï¸ Multiplicador mejorado a x" + mult);
    updateUI();
}

function resetGame() {
    money = 100;
    mult = 1;
    jackpot = 500;
    log("ğŸ”„ Juego reiniciado");
    updateUI();
}

function updateUI() {
    document.getElementById("money").innerText = money;
    document.getElementById("jackpot").innerText = jackpot;
    document.getElementById("mult").innerText = mult;
}

function log(text) {
    document.getElementById("log").innerText = text;
}
</script>

</body>
</html>
